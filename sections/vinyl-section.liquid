{% stylesheet %}
  .vinyl-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    width: 100%;
    background-color: var(--color-bg);
  }

  .vinyl-section__column {
    border: 1px solid #000;
    position: relative;
    /* overflow: hidden; */
  }

  /* Left column - Vinyl */
  .vinyl-section__vinyl-column {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 600px;
  }

  .vinyl-section__vinyl-wrapper {
    position: absolute;
    left: -20%;
    width: 120%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .vinyl-section__vinyl {
    width: 100%;
    max-width: 650px;
    height: auto;
    animation: vinyl-rotate var(--rotation-speed, 30s) linear infinite;
  }

  @keyframes vinyl-rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  /* Right column - Content */
  .vinyl-section__content-column {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 40px;
    text-align: center;
  }

  .vinyl-section__heading {
    margin: 0 0 40px 0;
    font-family: var(--font-header);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    font-size: clamp(32px, 4vw, 48px);
    line-height: 1.1;
    letter-spacing: -0.02em;
    color: #000;
  }

  .vinyl-section__button {
    background-color: var(--color-contrast-higher);
    color: var(--color-bg);
    padding: 18px 50px;
    text-decoration: none;
    font-family: var(--font-button);
    font-weight: var(--font-weight-medium);
    font-size: 15px;
    text-transform: uppercase;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .vinyl-section__button:hover {
    background-color: #333;
  }

  /* Mobile styles */
  @media screen and (max-width: 749px) {
    .vinyl-section {
      grid-template-columns: 1fr;
    }

    .vinyl-section__vinyl-column {
      min-height: 400px;
      border-bottom: 1px solid #000;
    }

    .vinyl-section__content-column {
      padding: 40px 20px;
    }

    .vinyl-section__vinyl-wrapper {
      left: -15%;
      width: 115%;
    }

    .vinyl-section__vinyl {
      max-width: 400px;
    }
  }

  /* Reduce motion preference */
  @media (prefers-reduced-motion: reduce) {
    .vinyl-section__vinyl {
      animation: none;
    }
  }
{% endstylesheet %}

<section class="vinyl-section" style="--rotation-speed: {{ section.settings.rotation_speed }}s;">
  <!-- Left Column - Vinyl -->
  <div class="vinyl-section__column vinyl-section__vinyl-column">
    <div class="vinyl-section__vinyl-wrapper">
      <img 
        src="{{ 'vinyl-disk.png' | asset_url }}" 
        alt="{{ section.settings.vinyl_alt_text | default: 'Rotating vinyl disk' }}"
        class="vinyl-section__vinyl"
        width="600"
        height="600"
        loading="lazy"
      >
    </div>
  </div>

  <!-- Right Column - Content -->
  <div class="vinyl-section__column vinyl-section__content-column">
    {% if section.settings.heading != blank %}
      <h2 class="vinyl-section__heading">{{ section.settings.heading }}</h2>
    {% endif %}
    
    {% if section.settings.button_label != blank and section.settings.button_link != blank %}
      <a href="{{ section.settings.button_link }}" class="vinyl-section__button">
        {{ section.settings.button_label }}
      </a>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Vinyl Section",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "textarea",
      "id": "heading",
      "label": "Heading",
      "default": "CELEBRATE THE ART OF BEING WONDERFULLY AVERAGE, WHERE THE JOKES ARE JUST ALRIGHT AND THE CLOTHES ARE ALSO FINE."
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "OUR STORY"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "header",
      "content": "Vinyl Settings"
    },
    {
      "type": "text",
      "id": "vinyl_alt_text",
      "label": "Vinyl Image Alt Text",
      "default": "French Roast vinyl disk"
    },
    {
      "type": "range",
      "id": "rotation_speed",
      "label": "Rotation Speed (seconds)",
      "min": 10,
      "max": 60,
      "step": 5,
      "default": 30,
      "info": "Time for one full rotation"
    },
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full Width",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Vinyl Section",
      "category": "Media"
    }
  ]
}
{% endschema %}
